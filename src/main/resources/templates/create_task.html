<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/Other/html.html to edit this template
-->
<html>
    <head>
        <title>Registrar</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script>
            function guardarTarea(){
                const task={
                    nombre: document.getElementById('nombre').value,
                    descripcion: document.getElementById('descripcion').value,
                    fechainicio: document.getElementById('fechainicio').value
                };
    
                fetch('http://localhost:8080/tasks/',{
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(task)
                }            )
                .then(response =>{
                    if(response.ok){
                        return response.json();
                    }
                })
                .then(data =>{
                    window.location.href = '/tasks/list';
                });
            }
        </script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    </head>
    <body>
        <main>
        <div class="mt-5" >
            <h2 style="text-align: center;" >Registrar Tarea</h2>
            <div class="container d-flex justify-content-center">
            <form class="p-4 border rounded shadow" style="width: 100%; max-width: 500px;" action="javascript:guardarTarea()" method="post">
                <div class="mb-3">
                    <label for="nombre" class="form-label">Nombre</label>
                    <input type="text" class="form-control" 
                           minlength="2" maxlength="100"
                           pattern = "[\S\s]+[\S]+"
                           id="nombre" name="nombre" required>
                </div>
                <div class="mb-3">
                    <label for="descripcion" class="form-label">Descripcio&#769;n</label>
                    <input type="text" class="form-control" 
                           minlength="2" maxlength="100"
                           pattern = "[\S\s]+[\S]+"
                           id="descripcion" name="descripcion" required>
                </div>
                <div class ="mb-3">
                    <label for="fechainicio" class="form-label"> Fecha de inicio</label>
                    <input type="date" class="form-control" id="fechainicio" name="fechainicio" required>
                </div>
                <button type="submit" class="btn btn-success">Guardar</button>
            </form>  
            </div>    
            
            <div class="container text-center mt-5">
               <a href="/tasks/home" class="btn btn-primary mt-3"> Inicio</a>
               <a href="/tasks/list" class="btn btn-primary mt-3"> Consultar tareas</a>
            </div> 
        </main>    
    </body>
</html>
